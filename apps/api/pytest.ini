[pytest]
pythonpath = .
asyncio_mode = auto
asyncio_default_fixture_loop_scope = function
env =
    D:ENV=test
    # Fernet keys for version snapshot encryption in tests
    D:VERSION_ENCRYPTION_KEY=_uKVT313or8juloqHLg9OtBNJv9LCBzEC6mJ1yG9S_E=
    D:META_ENCRYPTION_KEY=_uKVT313or8juloqHLg9OtBNJv9LCBzEC6mJ1yG9S_E=
    D:DATA_ENCRYPTION_KEY=_uKVT313or8juloqHLg9OtBNJv9LCBzEC6mJ1yG9S_E=
    D:PII_HASH_KEY=test-pii-hash-key-please-change
    # Default only; CI supplies its own DATABASE_URL (e.g. crm_test)
    D:DATABASE_URL=postgresql+psycopg://postgres:postgres@localhost:5432/crm
testpaths = tests
python_files = test_*.py
python_functions = test_*
