# =============================================================================
# Environment
# =============================================================================
ENV=dev

# =============================================================================
# Database
# =============================================================================
DATABASE_URL=postgresql+psycopg://postgres:postgres@localhost:5432/crm

# =============================================================================
# Session Token (JWT in HTTP-only cookie)
# =============================================================================
# Current signing key (min 32 chars in production)
JWT_SECRET=change-this-in-production-minimum-32-characters

# Previous key for rotation (set during rotation, clear after)
JWT_SECRET_PREVIOUS=

# Token expiry in hours
JWT_EXPIRES_HOURS=4

# =============================================================================
# Google OAuth
# =============================================================================
# Create credentials at: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-client-secret
GOOGLE_REDIRECT_URI=http://localhost:8000/auth/google/callback

# =============================================================================
# Encryption Keys (REQUIRED)
# =============================================================================
# Used for encrypting OAuth tokens + AI keys at rest
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
FERNET_KEY=

# Used for encrypting version snapshots (pipelines/templates/settings/etc)
# If empty, the app falls back to META_ENCRYPTION_KEY.
VERSION_ENCRYPTION_KEY=

# =============================================================================
# Per-User OAuth Integrations
# =============================================================================
ZOOM_CLIENT_ID=
ZOOM_CLIENT_SECRET=
ZOOM_REDIRECT_URI=http://localhost:8000/integrations/zoom/callback

# Gmail integration OAuth (separate from Google Login OAuth)
GMAIL_REDIRECT_URI=http://localhost:8000/integrations/gmail/callback

# =============================================================================
# Domain Restriction (optional)
# =============================================================================
# Comma-separated list of allowed email domains
# Leave empty to allow all domains
ALLOWED_EMAIL_DOMAINS=

# =============================================================================
# CORS
# =============================================================================
# Comma-separated allowed origins
CORS_ORIGINS=http://localhost:3000

# =============================================================================
# Frontend
# =============================================================================
# Used for safe post-login redirects
FRONTEND_URL=http://localhost:3000

# =============================================================================
# Dev-Only (required for /dev/* endpoints)
# =============================================================================
DEV_SECRET=local-dev-secret-change-me
DEV_BYPASS_AUTH=false

# =============================================================================
# Meta Lead Ads Integration
# =============================================================================
# Create app at: https://developers.facebook.com/apps/
META_APP_ID=
META_APP_SECRET=

# Random token you create for webhook verification
META_VERIFY_TOKEN=your-random-verify-token

# Set to true only for local testing (uses mock data)
META_TEST_MODE=false

# Graph API version (update periodically)
META_API_VERSION=v21.0

# Encryption key for page access tokens (REQUIRED if using Meta integration)
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
META_ENCRYPTION_KEY=

# Webhook payload size limit in bytes
META_WEBHOOK_MAX_PAYLOAD_BYTES=100000

# =============================================================================
# Meta Ads Insights (Spend/Budget data)
# =============================================================================
# Ad Account ID from Meta Ads Manager (format: act_XXXXXX)
META_AD_ACCOUNT_ID=

# System user access token with ads_read permission
# Create a System User in Meta Business Manager with ads_read permission
META_SYSTEM_TOKEN=

# =============================================================================
# Meta Conversions API (CAPI) - Send lead quality signals back to Meta
# =============================================================================
# When a Meta lead becomes "qualified", we notify Meta to optimize ad targeting
# This improves your Return on Ad Spend (ROAS) over time

# Dataset/Pixel ID from Meta Events Manager
META_PIXEL_ID=

# Set to true to enable sending conversion events to Meta
META_CAPI_ENABLED=false

# Optional: System user access token for CAPI (if not set, falls back to page token)
# Recommended: Create a System User in Meta Business Manager for dedicated CAPI access
META_CAPI_ACCESS_TOKEN=

# =============================================================================
# INTERNAL ENDPOINTS (Scheduled/Cron jobs)
# =============================================================================
# Secret for authenticating calls to /internal/scheduled/* endpoints
# Generate with: openssl rand -hex 32
INTERNAL_SECRET=

# =============================================================================
# ERROR TRACKING (Optional)
# =============================================================================
# Sentry DSN for error tracking in production
# Get from: https://sentry.io -> Project Settings -> Client Keys (DSN)
# Only initializes when ENV != "dev"
SENTRY_DSN=

# =============================================================================
# GCP MONITORING (Cloud Logging + Error Reporting)
# =============================================================================
# Set to 0 to disable GCP monitoring
GCP_MONITORING_ENABLED=1
# Optional override (Cloud Run sets GOOGLE_CLOUD_PROJECT automatically)
GCP_PROJECT_ID=
# Service name shown in Error Reporting
GCP_SERVICE_NAME=crm-api
# 0.0 - 1.0 sampling rate for error reporting
GCP_ERROR_REPORTING_SAMPLE_RATE=1.0

# =============================================================================
# RATE LIMITING
# =============================================================================
# Requests per minute per IP (defaults shown)
# RATE_LIMIT_AUTH=5       # Login attempts
# RATE_LIMIT_WEBHOOK=100  # Meta webhooks
# RATE_LIMIT_API=60       # General API
# RATE_LIMIT_SEARCH=30    # Global search
# RATE_LIMIT_PUBLIC_FORMS=10  # Public form submissions

# =============================================================================
# EMAIL PROVIDER (Resend)
# =============================================================================
# Get your API key from: https://resend.com/api-keys
# Required for sending emails (templates, notifications, etc.)
# Without this key, email jobs will run in "dry run" mode (logged but not sent)
RESEND_API_KEY=

# =============================================================================
# REDIS (Optional)
# =============================================================================
# Redis URL for distributed rate limiting across multiple workers
# If not set, falls back to in-memory rate limiting (single worker only)
# Format: redis://localhost:6379/0
REDIS_URL=
